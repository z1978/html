<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>pop</title>
<meta name="keywords" content="jQuery pop" />
<meta name="description" content="jQuery pop" /> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<style type="text/css"> 
body{font-size:12px;}
.selectItemcont{padding:8px;}
#selectItem{background:#FFF;position:absolute;top:0px;left:center;border:1px solid #000;overflow:hidden;width:240px;z-index:1000;}
#selectItem2{background:#FFF;position:absolute;top:0px;left:center;border:1px solid #000;overflow:hidden;width:240px;z-index:1000;}
.selectItemtit{line-height:20px;height:20px;margin:1px;padding-left:12px;}
.bgc_ccc{background:#E88E22;}
.selectItemleft{float:left;margin:0px;padding:0px;font-size:12px;font-weight:bold;color:#fff;}
.selectItemright{float:right;cursor:pointer;color:#fff;}
.selectItemcls{clear:both;font-size:0px;height:0px;overflow:hidden;}
.selectItemhidden{display:none;}
</style> 
<script src="jquery-1.3.1.js" type="text/javascript"></script>
<script type="text/javascript" src="jquery.bgiframe.js"></script>
<script>

function load(){  
   
    document.addEventListener('touchstart',touch, false);  
    document.addEventListener('touchmove',touch, false);  
    document.addEventListener('touchend',touch, false);  
       
    function touch (event){  
        var event = event || window.event;  
           
        var oInp = document.getElementById("inp");  
   
        switch(event.type){  
            case "touchstart":  
                console.log( event.type );
                break;  
            case "touchend":  
                console.log( event.type );
                break;  
            case "touchmove":  
                event.preventDefault();  
                console.log( event.type );
                break;  
        }  
           
    }  
}  
window.addEventListener('load',load, false);  

jQuery.fn.selectCity = function(targetId) {
	var _seft = this;
	var targetId = $(targetId);

	this.click(function(){
		var A_top = $(this).offset().top + $(this).outerHeight(true);  //  1
		var A_left =  $(this).offset().left;
		targetId.bgiframe();
		targetId.show().css({"position":"absolute","top":A_top+"px" ,"left":A_left+"px"});
	});

	targetId.find("#selectItemClose").click(function(){
		targetId.hide();
	});

	targetId.find("#selectSub :checkbox").click(function(){		
		targetId.find(":checkbox").attr("checked",false);
		$(this).attr("checked",true);	
		_seft.val( $(this).val() );
		targetId.hide();
	});

	$(document).click(function(event){
		if(event.target.id!=_seft.selector.substring(1)){
			targetId.hide();	
		}
	});

	targetId.click(function(e){
		e.stopPropagation(); //  2
	});

    return this;
}
 
$(function(){
	//test1:
	$("#address").selectCity("#selectItem");
	//test2：
	$("#address2").selectCity("#selectItem2");


load();
  
});


 </script>
</head>
<body>


地址选择一：<br/>
<input type="text" name="address" id="address" >
<br/><br/>
地址选择二：<br/>
<input type="text" name="address2" id="address2" size="20" >


<br/><br/><br/>

<div id="selectItem" class="selectItemhidden"> 
	<div id="selectItemAd" class="selectItemtit bgc_ccc"> 
		<h2 id="selectItemTitle" class="selectItemleft">请选择城市</h2> 
		<div id="selectItemClose" class="selectItemright">关闭</div>
	</div> 
	<div id="selectItemCount" class="selectItemcont"> 
		<div id="selectSub"> 
			<input type="checkbox" name="cr01"  id="cr01" value="北京1"/><label for="cr01">北京1</label>
			<input type="checkbox" name="cr02"  id="cr02" value="北京2"/><label for="cr02">北京2</label>
			<input type="checkbox" name="cr03"  id="cr03" value="北京3"/><label for="cr03">北京3</label>
			<input type="checkbox" name="cr09"  id="cr09" value="北京4"/><label for="cr09">北京4</label>
		</div> 
	</div> 
</div> 


<div id="selectItem2" class="selectItemhidden"> 
	<div id="selectItemAd" class="selectItemtit bgc_ccc"> 
		<h2 id="selectItemTitle" class="selectItemleft">请选择城市</h2> 
		<div id="selectItemClose" class="selectItemright">关闭</div>
	</div> 
	<div id="selectItemCount" class="selectItemcont"> 
		<div id="selectSub"> 
			<form name="form1" id="id_form1" action="" method="post">
			<select class="parent" name="foo">
			  <option value="" selected="selected">地方を選択</option>
			  <option value="北海道・東北">北海道・東北</option>
			  <option value="関東">関東</option>
			  <option value="甲信越・北陸">甲信越・北陸</option>
			  <option value="東海">東海</option>
			  <option value="関西">関西</option>
			  <option value="中国">中国</option>
			  <option value="四国">四国</option>
			  <option value="九州・沖縄">九州・沖縄</option>
			</select>

			<select class="children" name="bar" disabled>
			  <option value="" selected="selected">都道府県を選択</option>
			  <option value="北海道" data-val="北海道・東北">北海道</option>
			  <option value="青森県" data-val="北海道・東北">青森県</option>
			  <option value="岩手県" data-val="北海道・東北">岩手県</option>
			  <option value="宮城県" data-val="北海道・東北">宮城県</option>
			  <option value="秋田県" data-val="北海道・東北">秋田県</option>
			  <option value="山形県" data-val="北海道・東北">山形県</option>
			  <option value="福島県" data-val="北海道・東北">福島県</option>
			  <option value="茨城県" data-val="関東">茨城県</option>
			  <option value="栃木県" data-val="関東">栃木県</option>
			  <option value="群馬県" data-val="関東">群馬県</option>
			  <option value="埼玉県" data-val="関東">埼玉県</option>
			  <option value="千葉県" data-val="関東">千葉県</option>
			  <option value="東京都" data-val="関東">東京都</option>
			  <option value="神奈川県" data-val="関東">神奈川県</option>
			  <option value="新潟県" data-val="甲信越・北陸">新潟県</option>
			  <option value="富山県" data-val="甲信越・北陸">富山県</option>
			  <option value="石川県" data-val="甲信越・北陸">石川県</option>
			  <option value="福井県" data-val="甲信越・北陸">福井県</option>
			  <option value="山梨県" data-val="甲信越・北陸">山梨県</option>
			  <option value="長野県" data-val="甲信越・北陸">長野県</option>
			  <option value="岐阜県" data-val="東海">岐阜県</option>
			  <option value="静岡県" data-val="東海">静岡県</option>
			  <option value="愛知県" data-val="東海">愛知県</option>
			  <option value="三重県" data-val="東海">三重県</option>
			  <option value="滋賀県" data-val="関西">滋賀県</option>
			  <option value="京都府" data-val="関西">京都府</option>
			  <option value="大阪府" data-val="関西">大阪府</option>
			  <option value="兵庫県" data-val="関西">兵庫県</option>
			  <option value="奈良県" data-val="関西">奈良県</option>
			  <option value="和歌山県" data-val="関西">和歌山県</option>
			  <option value="鳥取県" data-val="中国">鳥取県</option>
			  <option value="島根県" data-val="中国">島根県</option>
			  <option value="岡山県" data-val="中国">岡山県</option>
			  <option value="広島県" data-val="中国">広島県</option>
			  <option value="山口県" data-val="中国">山口県</option>
			  <option value="徳島県" data-val="四国">徳島県</option>
			  <option value="香川県" data-val="四国">香川県</option>
			  <option value="愛媛県" data-val="四国">愛媛県</option>
			  <option value="高知県" data-val="四国">高知県</option>
			  <option value="福岡県" data-val="九州・沖縄">福岡県</option>
			  <option value="佐賀県" data-val="九州・沖縄">佐賀県</option>
			  <option value="長崎県" data-val="九州・沖縄">長崎県</option>
			  <option value="熊本県" data-val="九州・沖縄">熊本県</option>
			  <option value="大分県" data-val="九州・沖縄">大分県</option>
			  <option value="宮崎県" data-val="九州・沖縄">宮崎県</option>
			  <option value="鹿児島県" data-val="九州・沖縄">鹿児島県</option>
			  <option value="沖縄県" data-val="九州・沖縄">沖縄県</option>
			</select>
			<p>
			<input type="submit" value="送信"><input type="reset" value="リセット">
			</p>
			</form>
		</div> 
	</div> 
</div> 


<script type="text/javascript">


</script>

</body>
</html>

